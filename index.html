<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>远光84民间论坛盲盒开奖</title>
    <!-- 外部资源 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <!-- 高端配色配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',       // 深邃蓝 - 主色调
                        secondary: '#722ED1',     // 深紫 - 辅助色
                        accent: '#FFC200',        // 鎏金 - 强调色
                        'accent-dark': '#D4AF37', // 暗金
                        'silver': '#C0C0C0',      // 银灰
                        dark: '#1D2129',          // 近黑底色
                        'neutral-dark': '#4E5969', // 深灰文本
                        'neutral-light': '#C9CDD4' // 浅灰文本
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        display: ['Montserrat', 'sans-serif']
                    },
                    boxShadow: {
                        'elegant': '0 10px 30px -5px rgba(0, 0, 0, 0.08)',
                        'hover': '0 20px 40px -5px rgba(0, 0, 0, 0.12)',
                        'gold': '0 0 15px rgba(255, 194, 0, 0.3)',
                        'silver': '0 0 15px rgba(192, 192, 192, 0.3)'
                    }
                }
            }
        }
    </script>
    
    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }
            .bg-luxury {
                background: radial-gradient(circle at top right, #1D2129 0%, #0F172A 100%);
            }
            .card-luxury {
                background: rgba(255, 255, 255, 0.03);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.08);
                transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }
            .card-luxury:hover {
                transform: translateY(-6px);
                box-shadow: var(--tw-shadow-hover);
                border-color: rgba(255, 255, 255, 0.15);
            }
            .gold-gradient {
                background: linear-gradient(90deg, #FFC200 0%, #FFE172 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            .silver-gradient {
                background: linear-gradient(90deg, #C0C0C0 0%, #E8E8E8 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }
            .shine-effect {
                position: relative;
                overflow: hidden;
            }
            .shine-effect::after {
                content: '';
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: linear-gradient(
                    to right,
                    rgba(255, 255, 255, 0) 0%,
                    rgba(255, 255, 255, 0.1) 50%,
                    rgba(255, 255, 255, 0) 100%
                );
                transform: rotate(30deg);
                animation: shine 6s infinite;
            }
            @keyframes shine {
                0% { transform: rotate(30deg) translate(-100%, -100%); }
                100% { transform: rotate(30deg) translate(100%, 100%); }
            }
            .blindbox-reveal {
                animation: reveal 0.8s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
            }
            @keyframes reveal {
                0% { transform: scale(0.9) rotate(-2deg); opacity: 0; }
                70% { transform: scale(1.05) rotate(1deg); }
                100% { transform: scale(1) rotate(0); opacity: 1; }
            }
            .member-badge {
                position: relative;
                overflow: hidden;
            }
            .member-badge::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(
                    90deg,
                    rgba(255, 255, 255, 0) 0%,
                    rgba(255, 255, 255, 0.2) 50%,
                    rgba(255, 255, 255, 0) 100%
                );
                animation: badge-shine 3s infinite;
            }
            @keyframes badge-shine {
                100% { left: 100%; }
            }
            .avatar-upload {
                position: relative;
                overflow: hidden;
                cursor: pointer;
            }
            .avatar-upload input {
                position: absolute;
                top: 0;
                right: 0;
                min-width: 100%;
                min-height: 100%;
                font-size: 100px;
                opacity: 0;
                cursor: pointer;
            }
        }
    </style>
    
    <!-- 引入高端字体 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-dark text-white min-h-screen font-sans">
    <!-- 顶部导航 - 半透明质感 -->
    <nav class="bg-dark/80 backdrop-blur-md border-b border-white/10 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="#" class="flex items-center space-x-2">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center">
                            <i class="fa fa-gift text-white"></i>
                        </div>
                        <span class="font-display font-semibold text-white hidden sm:inline">远光84盲盒</span>
                    </a>
                </div>
                <div class="flex items-center space-x-5">
                    <!-- 账号相关 -->
                    <div id="authButtons" class="flex items-center space-x-3">
                        <button id="loginBtn" class="text-neutral-light hover:text-white transition-colors px-3 py-1.5 rounded-lg hover:bg-white/5">
                            登录
                        </button>
                        <button id="registerBtn" class="bg-primary/20 hover:bg-primary/30 text-primary px-3 py-1.5 rounded-lg transition-colors">
                            注册
                        </button>
                    </div>
                    
                    <!-- 用户菜单 (登录后显示) -->
                    <div id="userMenuContainer" class="hidden relative">
                        <button id="userMenuBtn" class="flex items-center space-x-2 focus:outline-none">
                            <div class="w-8 h-8 rounded-full overflow-hidden border-2 border-white/20">
                                <img id="navAvatar" src="https://picsum.photos/seed/avatar/100/100" alt="用户头像" class="w-full h-full object-cover">
                            </div>
                            <span class="text-sm hidden sm:inline" id="navUsername">用户名</span>
                            <i class="fa fa-angle-down text-neutral-light text-xs"></i>
                        </button>
                        
                        <!-- 下拉菜单 -->
                        <div id="userDropdownMenu" class="absolute right-0 mt-2 w-48 bg-dark border border-white/10 rounded-lg shadow-elegant py-2 hidden z-50">
                            <a href="#" id="profileLink" class="block px-4 py-2 text-sm text-neutral-light hover:bg-white/5 hover:text-white transition-colors">
                                <i class="fa fa-user-circle mr-2"></i>个人资料
                            </a>
                            <a href="#" id="memberCenterLink" class="block px-4 py-2 text-sm text-neutral-light hover:bg-white/5 hover:text-white transition-colors">
                                <i class="fa fa-id-card mr-2"></i>会员中心
                            </a>
                            <div class="border-t border-white/10 my-1"></div>
                            <a href="#" id="logoutLink" class="block px-4 py-2 text-sm text-red-400 hover:bg-white/5 transition-colors">
                                <i class="fa fa-sign-out mr-2"></i>退出登录
                            </a>
                        </div>
                    </div>
                    
                    <button id="helpBtn" class="text-neutral-light hover:text-white transition-colors tooltip" data-tooltip="使用帮助">
                        <i class="fa fa-question-circle"></i>
                    </button>
                    <button id="shareBtn" class="text-neutral-light hover:text-white transition-colors tooltip" data-tooltip="分享活动">
                        <i class="fa fa-share-alt"></i>
                    </button>
                    <button id="adminToggle" class="text-neutral-light hover:text-white transition-colors tooltip hidden" data-tooltip="管理员入口">
                        <i class="fa fa-cog"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- 页面标题区 - 高端大气 -->
        <div class="text-center mb-12 mt-6 relative">
            <div class="absolute -top-10 left-1/2 transform -translate-x-1/2 w-full max-w-2xl h-1 bg-gradient-to-r from-transparent via-accent/30 to-transparent"></div>
            <h1 class="text-[clamp(2rem,6vw,3.2rem)] font-display font-bold mb-4 text-shadow relative z-10">
                <span class="gold-gradient">远光84</span> 民间论坛盲盒开奖
            </h1>
            <p id="currentTime" class="text-neutral-light text-lg mb-6 font-light"></p>
            <div class="w-32 h-0.5 bg-gradient-to-r from-primary to-secondary mx-auto"></div>
        </div>
        
        <!-- 登录模态框 -->
        <div id="loginModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
            <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-md w-full shadow-elegant">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-display font-semibold">账号登录</h3>
                    <button class="close-modal text-neutral-light hover:text-white transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                
                <form id="loginForm" class="space-y-5">
                    <div>
                        <label for="loginUsername" class="block text-sm font-medium text-neutral-light mb-2">用户名</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-user text-neutral-light"></i>
                            </div>
                            <input 
                                type="text" 
                                id="loginUsername" 
                                class="w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="请输入用户名"
                                required
                            >
                        </div>
                    </div>
                    
                    <div>
                        <label for="loginPassword" class="block text-sm font-medium text-neutral-light mb-2">密码</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-lock text-neutral-light"></i>
                            </div>
                            <input 
                                type="password" 
                                id="loginPassword" 
                                class="w-full pl-12 pr-12 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="请输入密码"
                                required
                            >
                            <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-4 flex items-center text-neutral-light hover:text-white transition-colors">
                                <i class="fa fa-eye-slash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input 
                                type="checkbox" 
                                id="rememberLogin" 
                                class="h-4 w-4 text-primary focus:ring-primary/50 border-white/20 rounded"
                            >
                            <label for="rememberLogin" class="ml-2 block text-sm text-neutral-light">
                                记住登录状态
                            </label>
                        </div>
                        <a href="#" class="text-sm text-primary hover:text-primary/80 transition-colors">
                            忘记密码?
                        </a>
                    </div>
                    
                    <button 
                        type="submit" 
                        class="w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all flex items-center justify-center group"
                    >
                        <span>登录</span>
                        <i class="fa fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-sm text-neutral-light">
                        还没有账号? <a href="#" id="switchToRegister" class="text-primary hover:text-primary/80 transition-colors">立即注册</a>
                    </p>
                </div>
                
                <div id="loginError" class="mt-4 text-sm text-red-400 hidden text-center"></div>
            </div>
        </div>
        
        <!-- 注册模态框 -->
        <div id="registerModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
            <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-md w-full shadow-elegant">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-display font-semibold">账号注册</h3>
                    <button class="close-modal text-neutral-light hover:text-white transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                
                <form id="registerForm" class="space-y-5">
                    <div>
                        <label for="regUsername" class="block text-sm font-medium text-neutral-light mb-2">用户名</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-user text-neutral-light"></i>
                            </div>
                            <input 
                                type="text" 
                                id="regUsername" 
                                class="w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="请设置用户名"
                                required
                                minlength="3"
                                maxlength="16"
                            >
                        </div>
                        <p class="text-xs text-neutral-light/70 mt-1">3-16个字符，支持字母、数字和下划线</p>
                    </div>
                    
                    <div>
                        <label for="regEmail" class="block text-sm font-medium text-neutral-light mb-2">邮箱</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-envelope text-neutral-light"></i>
                            </div>
                            <input 
                                type="email" 
                                id="regEmail" 
                                class="w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="请输入邮箱地址"
                                required
                            >
                        </div>
                        <p class="text-xs text-neutral-light/70 mt-1">用于账号找回和通知</p>
                    </div>
                    
                    <div>
                        <label for="regPassword" class="block text-sm font-medium text-neutral-light mb-2">密码</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-lock text-neutral-light"></i>
                            </div>
                            <input 
                                type="password" 
                                id="regPassword" 
                                class="w-full pl-12 pr-12 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="请设置密码"
                                required
                                minlength="6"
                            >
                            <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-4 flex items-center text-neutral-light hover:text-white transition-colors">
                                <i class="fa fa-eye-slash"></i>
                            </button>
                        </div>
                        <p class="text-xs text-neutral-light/70 mt-1">至少6个字符，建议包含字母和数字</p>
                    </div>
                    
                    <div>
                        <label for="regConfirmPassword" class="block text-sm font-medium text-neutral-light mb-2">确认密码</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-lock text-neutral-light"></i>
                            </div>
                            <input 
                                type="password" 
                                id="regConfirmPassword" 
                                class="w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="请再次输入密码"
                                required
                            >
                        </div>
                    </div>
                    
                    <div class="pt-2">
                        <button 
                            type="submit" 
                            class="w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all flex items-center justify-center group"
                        >
                            <span>注册账号</span>
                            <i class="fa fa-user-plus ml-2 group-hover:translate-x-1 transition-transform"></i>
                        </button>
                    </div>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-sm text-neutral-light">
                        已有账号? <a href="#" id="switchToLogin" class="text-primary hover:text-primary/80 transition-colors">立即登录</a>
                    </p>
                </div>
                
                <div id="registerError" class="mt-4 text-sm text-red-400 hidden text-center"></div>
                <div id="registerSuccess" class="mt-4 text-sm text-green-400 hidden text-center"></div>
            </div>
        </div>
        
        <!-- 管理员注册模态框 (隐藏，仅通过特殊方式访问) -->
        <div id="adminRegisterModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
            <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-md w-full shadow-elegant">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-display font-semibold">管理员注册</h3>
                    <button class="close-modal text-neutral-light hover:text-white transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                
                <form id="adminRegisterForm" class="space-y-5">
                    <div>
                        <label for="adminRegKey" class="block text-sm font-medium text-neutral-light mb-2">管理员密钥</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-key text-neutral-light"></i>
                            </div>
                            <input 
                                type="password" 
                                id="adminRegKey" 
                                class="w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="请输入管理员密钥"
                                required
                            >
                        </div>
                    </div>
                    
                    <div>
                        <label for="adminRegUsername" class="block text-sm font-medium text-neutral-light mb-2">管理员用户名</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-user text-neutral-light"></i>
                            </div>
                            <input 
                                type="text" 
                                id="adminRegUsername" 
                                class="w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="请设置管理员用户名"
                                required
                            >
                        </div>
                    </div>
                    
                    <div>
                        <label for="adminRegPassword" class="block text-sm font-medium text-neutral-light mb-2">管理员密码</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-lock text-neutral-light"></i>
                            </div>
                            <input 
                                type="password" 
                                id="adminRegPassword" 
                                class="w-full pl-12 pr-12 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="请设置管理员密码"
                                required
                                minlength="8"
                            >
                            <button type="button" class="toggle-password absolute inset-y-0 right-0 pr-4 flex items-center text-neutral-light hover:text-white transition-colors">
                                <i class="fa fa-eye-slash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <button 
                        type="submit" 
                        class="w-full bg-gradient-to-r from-accent to-accent-dark hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all flex items-center justify-center group"
                    >
                        <span>注册管理员</span>
                        <i class="fa fa-shield ml-2 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </form>
                
                <div id="adminRegisterError" class="mt-4 text-sm text-red-400 hidden text-center"></div>
            </div>
        </div>
        
        <!-- 个人资料模态框 -->
        <div id="profileModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
            <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-2xl w-full shadow-elegant max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-display font-semibold">个人资料</h3>
                    <button class="close-modal text-neutral-light hover:text-white transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                
                <form id="profileForm" class="space-y-6">
                    <!-- 头像设置 -->
                    <div class="text-center">
                        <label class="avatar-upload inline-block">
                            <div class="w-32 h-32 rounded-full overflow-hidden border-4 border-white/10 mx-auto mb-4">
                                <img id="profileAvatar" src="https://picsum.photos/seed/avatar/100/100" alt="用户头像" class="w-full h-full object-cover">
                            </div>
                            <input type="file" id="avatarUpload" accept="image/*" class="hidden">
                            <p class="text-sm text-primary hover:text-primary/80 cursor-pointer">点击更换头像</p>
                        </label>
                        <p class="text-xs text-neutral-light mt-2">支持JPG、PNG格式，建议尺寸200x200像素</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div>
                            <label for="profileUsername" class="block text-sm font-medium text-neutral-light mb-2">用户名</label>
                            <input 
                                type="text" 
                                id="profileUsername" 
                                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                readonly
                            >
                        </div>
                        
                        <div>
                            <label for="profileEmail" class="block text-sm font-medium text-neutral-light mb-2">邮箱</label>
                            <input 
                                type="email" 
                                id="profileEmail" 
                                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                required
                            >
                        </div>
                    </div>
                    
                    <div class="border-t border-white/10 pt-5">
                        <h4 class="font-medium mb-4">修改密码</h4>
                        <div class="space-y-5">
                            <div>
                                <label for="currentPassword" class="block text-sm font-medium text-neutral-light mb-2">当前密码</label>
                                <input 
                                    type="password" 
                                    id="currentPassword" 
                                    class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                    placeholder="输入当前密码"
                                >
                            </div>
                            
                            <div>
                                <label for="newPassword" class="block text-sm font-medium text-neutral-light mb-2">新密码</label>
                                <input 
                                    type="password" 
                                    id="newPassword" 
                                    class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                    placeholder="设置新密码（至少6个字符）"
                                    minlength="6"
                                >
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" class="close-modal px-5 py-2.5 bg-white/5 hover:bg-white/10 text-white rounded-lg transition-colors">
                            取消
                        </button>
                        <button 
                            type="submit" 
                            class="px-5 py-2.5 bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-white rounded-lg transition-all"
                        >
                            保存修改
                        </button>
                    </div>
                </form>
                
                <div id="profileError" class="mt-4 text-sm text-red-400 hidden text-center"></div>
                <div id="profileSuccess" class="mt-4 text-sm text-green-400 hidden text-center"></div>
            </div>
        </div>
        
        <!-- 会员中心弹窗 -->
        <div id="memberCenterModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
            <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-2xl w-full shadow-elegant max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-display font-semibold">会员中心</h3>
                    <button class="close-modal text-neutral-light hover:text-white transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                
                <!-- 会员信息卡片 -->
                <div class="card-luxury rounded-xl p-6 mb-8 relative overflow-hidden shine-effect">
                    <div class="flex flex-col sm:flex-row items-center">
                        <!-- 会员等级徽章 -->
                        <div id="memberBadge" class="member-badge w-24 h-24 rounded-full bg-gradient-to-br from-neutral-dark to-dark flex items-center justify-center border-2 border-white/10 mb-4 sm:mb-0 sm:mr-6">
                            <i class="fa fa-user text-4xl" id="memberBadgeIcon"></i>
                        </div>
                        
                        <!-- 会员信息 -->
                        <div class="text-center sm:text-left">
                            <h4 class="text-2xl font-display font-semibold mb-1" id="memberLevelName">普通会员</h4>
                            <p class="text-neutral-light mb-4">当前积分: <span id="memberPoints" class="text-white">0</span> 点</p>
                            
                            <!-- 会员进度条 -->
                            <div class="w-full bg-white/5 rounded-full h-2 mb-1">
                                <div id="memberProgress" class="bg-gradient-to-r from-primary to-secondary h-2 rounded-full" style="width: 0%"></div>
                            </div>
                            <p class="text-xs text-neutral-light text-right">
                                距离升级: <span id="pointsToNextLevel">100</span> 积分
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- 会员特权 -->
                <div class="mb-8">
                    <h4 class="font-display font-medium text-white text-lg mb-4">会员特权</h4>
                    <div class="space-y-3">
                        <div class="flex items-start">
                            <div class="mt-1 w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0">
                                <i class="fa fa-percent text-primary text-xs"></i>
                            </div>
                            <div class="ml-3">
                                <p class="font-medium">中奖概率提升</p>
                                <p class="text-sm text-neutral-light" id="memberProbabilityBonus">普通会员: 基础概率</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="mt-1 w-5 h-5 rounded-full bg-secondary/20 flex items-center justify-center flex-shrink-0">
                                <i class="fa fa-gift text-secondary text-xs"></i>
                            </div>
                            <div class="ml-3">
                                <p class="font-medium">专属奖品</p>
                                <p class="text-sm text-neutral-light" id="memberExclusivePrizes">普通会员: 无专属奖品</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="mt-1 w-5 h-5 rounded-full bg-accent/20 flex items-center justify-center flex-shrink-0">
                                <i class="fa fa-ticket text-accent text-xs"></i>
                            </div>
                            <div class="ml-3">
                                <p class="font-medium">每日开盒次数</p>
                                <p class="text-sm text-neutral-light" id="memberDailyLimit">普通会员: 每日3次</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 会员等级说明 -->
                <div>
                    <h4 class="font-display font-medium text-white text-lg mb-4">会员等级说明</h4>
                    <div class="space-y-4">
                        <div class="card-luxury rounded-lg p-4 flex items-center">
                            <div class="w-10 h-10 rounded-full bg-neutral-dark flex items-center justify-center mr-4">
                                <i class="fa fa-user text-neutral-light"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-center">
                                    <p class="font-medium">普通会员</p>
                                    <p class="text-sm text-neutral-light">0-99积分</p>
                                </div>
                                <p class="text-xs text-neutral-light mt-1">基础权益，无额外加成</p>
                            </div>
                        </div>
                        
                        <div class="card-luxury rounded-lg p-4 flex items-center border border-silver/30 shadow-silver">
                            <div class="w-10 h-10 rounded-full bg-silver/20 flex items-center justify-center mr-4">
                                <i class="fa fa-user-plus silver-gradient"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-center">
                                    <p class="font-medium silver-gradient">白银会员</p>
                                    <p class="text-sm text-neutral-light">100-499积分</p>
                                </div>
                                <p class="text-xs text-neutral-light mt-1">中奖概率+10%，每日可开盒5次</p>
                            </div>
                        </div>
                        
                        <div class="card-luxury rounded-lg p-4 flex items-center border border-accent/30 shadow-gold">
                            <div class="w-10 h-10 rounded-full bg-accent/20 flex items-center justify-center mr-4">
                                <i class="fa fa-user-plus gold-gradient"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-center">
                                    <p class="font-medium gold-gradient">黄金会员</p>
                                    <p class="text-sm text-neutral-light">500+积分</p>
                                </div>
                                <p class="text-xs text-neutral-light mt-1">中奖概率+30%，每日可开盒10次，解锁黄金专属奖品</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 帮助弹窗 -->
        <div id="helpModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
            <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-2xl w-full shadow-elegant max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-display font-semibold">使用指南</h3>
                    <button class="close-modal text-neutral-light hover:text-white transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                <div class="space-y-6 text-neutral-light">
                    <div>
                        <h4 class="font-display font-medium text-white text-lg mb-3">用户兑换流程</h4>
                        <ol class="list-decimal pl-5 space-y-2">
                            <li>注册并登录您的账号</li>
                            <li>在兑换区输入您获得的盲盒兑换码</li>
                            <li>点击"开启盲盒"按钮，系统将随机分配对应奖品</li>
                            <li>每个兑换码仅限使用一次，重复使用将提示无效</li>
                            <li>兑换成功后可复制奖品码进行后续使用</li>
                        </ol>
                    </div>
                    
                    <div class="pt-4 border-t border-white/10">
                        <h4 class="font-display font-medium text-white text-lg mb-3">会员体系说明</h4>
                        <ul class="list-disc pl-5 space-y-2">
                            <li>每次成功开启盲盒可获得10积分</li>
                            <li>积分达到一定数量可自动升级会员等级</li>
                            <li>高级会员享有更高中奖概率和更多开盒次数</li>
                            <li>黄金会员可解锁专属限量奖品</li>
                        </ul>
                    </div>
                    
                    <div class="pt-4 border-t border-white/10">
                        <h4 class="font-display font-medium text-white text-lg mb-3">常见问题</h4>
                        <div class="space-y-4">
                            <div>
                                <p class="font-medium text-white">兑换码无效怎么办？</p>
                                <p class="mt-1 text-sm">请检查兑换码是否输入正确，注意区分大小写。若确认无误仍无法使用，可能是兑换码已过期或被使用。</p>
                            </div>
                            <div>
                                <p class="font-medium text-white">如何获取更多兑换码？</p>
                                <p class="mt-1 text-sm">兑换码通过论坛活动定期发放，关注远光84民间论坛公告获取最新信息。黄金会员每月可额外获得2个兑换码。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 分享弹窗 -->
        <div id="shareModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
            <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-md w-full shadow-elegant">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-display font-semibold">分享活动</h3>
                    <button class="close-modal text-neutral-light hover:text-white transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-neutral-light mb-2">活动链接</label>
                    <div class="flex">
                        <input 
                            type="text" 
                            id="shareLink" 
                            value="" 
                            readonly
                            class="flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-l-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                        >
                        <button id="copyLinkBtn" class="bg-gradient-to-r from-primary to-secondary text-white px-4 py-3 rounded-r-lg hover:opacity-90 transition-opacity">
                            复制
                        </button>
                    </div>
                </div>
                <div class="flex justify-center space-x-5 mb-6">
                    <button class="share-platform w-12 h-12 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors tooltip" data-tooltip="分享到微信">
                        <i class="fa fa-weixin text-white"></i>
                    </button>
                    <button class="share-platform w-12 h-12 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors tooltip" data-tooltip="分享到QQ">
                        <i class="fa fa-qq text-white"></i>
                    </button>
                    <button class="share-platform w-12 h-12 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors tooltip" data-tooltip="分享到微博">
                        <i class="fa fa-weibo text-white"></i>
                    </button>
                    <button class="share-platform w-12 h-12 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors tooltip" data-tooltip="分享到链接">
                        <i class="fa fa-link text-white"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 管理员登录 -->
        <div id="adminLogin" class="hidden card-luxury rounded-xl p-6 shadow-elegant mb-8">
            <h2 class="text-xl font-display font-semibold mb-6 flex items-center">
                <div class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center mr-3">
                    <i class="fa fa-lock text-primary"></i>
                </div>
                管理员登录
            </h2>
            <form id="adminLoginForm" class="space-y-5">
                <div>
                    <label for="adminLoginUsername" class="block text-sm font-medium text-neutral-light mb-2">管理员用户名</label>
                    <input 
                        type="text" 
                        id="adminLoginUsername" 
                        class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                        placeholder="请输入管理员用户名"
                        required
                    >
                </div>
                
                <div>
                    <label for="adminLoginPassword" class="block text-sm font-medium text-neutral-light mb-2">管理员密码</label>
                    <input 
                        type="password" 
                        id="adminLoginPassword" 
                        class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                        placeholder="请输入管理员密码"
                        required
                    >
                </div>
                
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input 
                            type="checkbox" 
                            id="rememberAdminLogin" 
                            class="h-4 w-4 text-primary focus:ring-primary/50 border-white/20 rounded"
                        >
                        <label for="rememberAdminLogin" class="ml-2 block text-sm text-neutral-light">
                            记住登录状态
                        </label>
                    </div>
                    <button 
                        type="submit" 
                        class="bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-white font-medium py-3 px-6 rounded-lg transition-all flex items-center"
                    >
                        <span>登录管理</span>
                        <i class="fa fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </form>
            <p id="adminLoginError" class="mt-4 text-sm text-red-400 hidden">用户名或密码错误，请重试</p>
        </div>
        
        <!-- 管理员区域 -->
        <div id="adminPanel" class="hidden space-y-8">
            <!-- 管理员头部 -->
            <div class="card-luxury rounded-xl p-6 shadow-elegant">
                <div class="flex flex-wrap justify-between items-center mb-6">
                    <h2 class="text-xl font-display font-semibold flex items-center">
                        <div class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center mr-3">
                            <i class="fa fa-cogs text-primary"></i>
                        </div>
                        盲盒管理中心
                    </h2>
                    <div class="flex space-x-3 mt-4 sm:mt-0">
                        <button id="memberManagementBtn" class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg transition-colors text-sm flex items-center">
                            <i class="fa fa-users mr-2 text-accent"></i>
                            <span>会员管理</span>
                        </button>
                        <button id="changeAdminPass" class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg transition-colors text-sm flex items-center">
                            <i class="fa fa-key mr-2 text-neutral-light"></i>
                            <span>修改密码</span>
                        </button>
                        <button id="adminLogoutBtn" class="px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg transition-colors text-sm flex items-center">
                            <i class="fa fa-sign-out mr-2"></i>
                            <span>退出登录</span>
                        </button>
                    </div>
                </div>
                
                <!-- 数据概览 -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6">
                    <div class="bg-white/5 rounded-lg p-5 border border-white/5">
                        <p class="text-neutral-light text-sm mb-2">总兑换码数</p>
                        <p id="statTotalCodes" class="text-3xl font-display font-semibold text-white">0</p>
                    </div>
                    <div class="bg-white/5 rounded-lg p-5 border border-white/5">
                        <p class="text-neutral-light text-sm mb-2">已使用</p>
                        <p id="statUsedCodes" class="text-3xl font-display font-semibold text-primary">0</p>
                    </div>
                    <div class="bg-white/5 rounded-lg p-5 border border-white/5">
                        <p class="text-neutral-light text-sm mb-2">未使用</p>
                        <p id="statUnusedCodes" class="text-3xl font-display font-semibold text-secondary">0</p>
                    </div>
                    <div class="bg-white/5 rounded-lg p-5 border border-white/5">
                        <p class="text-neutral-light text-sm mb-2">注册用户</p>
                        <p id="statTotalMembers" class="text-3xl font-display font-semibold text-accent">0</p>
                    </div>
                </div>
            </div>
            
            <!-- 会员管理弹窗 -->
            <div id="memberManagementModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
                <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-3xl w-full shadow-elegant max-h-[90vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-display font-semibold">会员管理</h3>
                        <button class="close-modal text-neutral-light hover:text-white transition-colors">
                            <i class="fa fa-times"></i>
                        </button>
                    </div>
                    
                    <!-- 会员等级设置 -->
                    <div class="mb-8">
                        <h4 class="font-display font-medium text-white text-lg mb-4">会员等级设置</h4>
                        <div class="space-y-6">
                            <div class="card-luxury rounded-lg p-5">
                                <h5 class="font-medium mb-3">白银会员</h5>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-light mb-2">升级所需积分</label>
                                        <input 
                                            type="number" 
                                            id="silverPoints" 
                                            class="w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                            value="100"
                                            min="1"
                                        >
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-light mb-2">概率提升 (%)</label>
                                        <input 
                                            type="number" 
                                            id="silverProbBonus" 
                                            class="w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                            value="10"
                                            min="0"
                                            max="100"
                                        >
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-light mb-2">每日开盒次数</label>
                                        <input 
                                            type="number" 
                                            id="silverDailyLimit" 
                                            class="w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                            value="5"
                                            min="1"
                                        >
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card-luxury rounded-lg p-5 border border-accent/30 shadow-gold">
                                <h5 class="font-medium gold-gradient mb-3">黄金会员</h5>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-light mb-2">升级所需积分</label>
                                        <input 
                                            type="number" 
                                            id="goldPoints" 
                                            class="w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                            value="500"
                                            min="1"
                                        >
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-light mb-2">概率提升 (%)</label>
                                        <input 
                                            type="number" 
                                            id="goldProbBonus" 
                                            class="w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                            value="30"
                                            min="0"
                                            max="100"
                                        >
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-light mb-2">每日开盒次数</label>
                                        <input 
                                            type="number" 
                                            id="goldDailyLimit" 
                                            class="w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                            value="10"
                                            min="1"
                                        >
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-neutral-light mb-2">每月额外兑换码</label>
                                        <input 
                                            type="number" 
                                            id="goldMonthlyCodes" 
                                            class="w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                            value="2"
                                            min="0"
                                        >
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button id="saveMemberSettings" class="mt-5 px-5 py-2.5 bg-gradient-to-r from-secondary to-primary hover:opacity-90 text-white rounded-lg transition-all text-sm flex items-center">
                            <i class="fa fa-save mr-2"></i>
                            <span>保存会员设置</span>
                        </button>
                    </div>
                    
                    <!-- 会员列表 -->
                    <div>
                        <h4 class="font-display font-medium text-white text-lg mb-4">会员列表</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full">
                                <thead>
                                    <tr class="border-b border-white/10">
                                        <th class="px-4 py-3 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">用户信息</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">会员等级</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">积分</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">开盒次数</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="membersTableBody">
                                    <!-- 会员数据将动态生成 -->
                                    <tr>
                                        <td colspan="5" class="px-4 py-8 text-center text-neutral-light">
                                            <i class="fa fa-users mb-2 block text-2xl"></i>
                                            暂无会员数据
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 升级会员弹窗 -->
            <div id="upgradeMemberModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
                <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-md w-full shadow-elegant">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-display font-semibold">升级会员</h3>
                        <button class="close-modal text-neutral-light hover:text-white transition-colors">
                            <i class="fa fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="upgradeMemberForm" class="space-y-5">
                        <input type="hidden" id="upgradeMemberId">
                        
                        <div class="bg-white/5 rounded-lg p-4">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full overflow-hidden mr-3">
                                    <img id="upgradeMemberAvatar" src="https://picsum.photos/seed/avatar/100/100" alt="用户头像" class="w-full h-full object-cover">
                                </div>
                                <div>
                                    <p id="upgradeMemberUsername" class="font-medium"></p>
                                    <p id="upgradeMemberCurrentLevel" class="text-sm text-neutral-light"></p>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-neutral-light mb-2">目标会员等级</label>
                            <select id="targetMemberLevel" class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white">
                                <option value="normal">普通会员</option>
                                <option value="silver">白银会员</option>
                                <option value="gold">黄金会员</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-neutral-light mb-2">调整积分 (可选)</label>
                            <input 
                                type="number" 
                                id="adjustPoints" 
                                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="不填则保持当前积分"
                                min="0"
                            >
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-neutral-light mb-2">备注 (可选)</label>
                            <textarea 
                                id="upgradeRemark" 
                                class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                rows="2"
                                placeholder="记录升级原因等信息"
                            ></textarea>
                        </div>
                        
                        <button 
                            type="submit" 
                            class="w-full bg-gradient-to-r from-accent to-accent-dark hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all"
                        >
                            确认升级
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- 奖品概率设置 -->
            <div class="card-luxury rounded-xl p-6 shadow-elegant">
                <h3 class="text-lg font-display font-semibold mb-6 flex items-center">
                    <div class="w-6 h-6 rounded-full bg-secondary/20 flex items-center justify-center mr-2">
                        <i class="fa fa-percent text-secondary text-sm"></i>
                    </div>
                    奖品概率设置
                </h3>
                
                <div id="prizesContainer" class="space-y-6 mb-6">
                    <!-- 奖品设置将动态生成 -->
                </div>
                
                <div class="flex flex-wrap justify-between items-center">
                    <button id="addPrizeBtn" class="px-4 py-2.5 bg-white/5 hover:bg-white/10 rounded-lg transition-colors text-sm flex items-center mt-4 sm:mt-0">
                        <i class="fa fa-plus mr-2 text-accent"></i>
                        <span>添加奖品</span>
                    </button>
                    <button id="saveProbabilitiesBtn" class="px-5 py-2.5 bg-gradient-to-r from-secondary to-primary hover:opacity-90 text-white rounded-lg transition-all text-sm flex items-center mt-4 sm:mt-0">
                        <i class="fa fa-save mr-2"></i>
                        <span>保存设置</span>
                    </button>
                </div>
                
                <!-- 概率图表 -->
                <div class="mt-8 pt-6 border-t border-white/10">
                    <h4 class="text-neutral-light font-medium mb-4">概率分布预览</h4>
                    <div class="h-64 bg-white/5 rounded-lg p-4">
                        <canvas id="probabilityChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- 兑换码管理 -->
            <div class="card-luxury rounded-xl p-6 shadow-elegant">
                <h3 class="text-lg font-display font-semibold mb-6 flex items-center">
                    <div class="w-6 h-6 rounded-full bg-primary/20 flex items-center justify-center mr-2">
                        <i class="fa fa-key text-primary text-sm"></i>
                    </div>
                    兑换码管理
                </h3>
                
                <!-- 兑换码操作区 -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-5 mb-8">
                    <!-- 导入 -->
                    <div class="bg-white/5 rounded-lg p-5 border border-white/5">
                        <h4 class="text-neutral-light text-sm mb-4">批量导入</h4>
                        <div class="border-2 border-dashed border-white/10 rounded-lg p-4 text-center hover:border-primary/50 transition-colors cursor-pointer">
                            <input type="file" id="importCodes" accept=".txt,.csv" class="hidden">
                            <label for="importCodes" class="cursor-pointer">
                                <i class="fa fa-upload text-neutral-light text-2xl mb-3 block"></i>
                                <p class="text-sm text-neutral-light">点击或拖拽文件到此处</p>
                                <p class="text-xs text-neutral-light/70 mt-1">支持TXT或CSV格式</p>
                            </label>
                        </div>
                        <p id="importStatus" class="text-xs mt-3 text-neutral-light hidden"></p>
                    </div>
                    
                    <!-- 导出 -->
                    <div class="bg-white/5 rounded-lg p-5 border border-white/5">
                        <h4 class="text-neutral-light text-sm mb-4">批量导出</h4>
                        <div class="space-y-3">
                            <button id="exportCodesBtn" class="w-full py-2.5 bg-white/5 hover:bg-white/10 rounded-lg transition-colors text-sm flex items-center justify-center">
                                <i class="fa fa-download mr-2 text-neutral-light"></i>
                                <span>导出所有兑换码</span>
                            </button>
                            <button id="exportUsedCodesBtn" class="w-full py-2.5 bg-white/5 hover:bg-white/10 rounded-lg transition-colors text-sm flex items-center justify-center">
                                <i class="fa fa-download mr-2 text-neutral-light"></i>
                                <span>导出已使用兑换码</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 生成 -->
                    <div class="bg-white/5 rounded-lg p-5 border border-white/5">
                        <h4 class="text-neutral-light text-sm mb-4">生成兑换码</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="text-xs text-neutral-light/70 block mb-1">数量</label>
                                <input type="number" id="generateCount" min="1" max="1000" value="10" 
                                    class="w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white text-sm">
                            </div>
                            <div>
                                <label class="text-xs text-neutral-light/70 block mb-1">长度</label>
                                <input type="number" id="codeLength" min="4" max="20" value="8"
                                    class="w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white text-sm">
                            </div>
                            <button id="generateCodesBtn" class="w-full py-2.5 bg-gradient-to-r from-accent to-accent-dark hover:opacity-90 text-white rounded-lg transition-all text-sm">
                                生成兑换码
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 兑换码列表 -->
                <div>
                    <div class="flex flex-wrap justify-between items-center mb-6">
                        <h4 class="text-neutral-light font-medium">兑换码列表</h4>
                        <div class="flex flex-wrap items-center space-x-3 mt-3 sm:mt-0">
                            <!-- 搜索框 -->
                            <div class="relative">
                                <input 
                                    type="text" 
                                    id="searchCodes" 
                                    placeholder="搜索兑换码..." 
                                    class="pl-9 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white text-sm w-full sm:w-auto"
                                >
                                <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-light"></i>
                            </div>
                            
                            <!-- 筛选下拉框 -->
                            <select id="filterCodes" class="bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white text-sm focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors">
                                <option value="all">所有状态</option>
                                <option value="used">已使用</option>
                                <option value="unused">未使用</option>
                            </select>
                            
                            <!-- 批量操作按钮 -->
                            <div class="flex items-center space-x-2">
                                <input 
                                    type="checkbox" 
                                    id="selectAllCodes" 
                                    class="h-4 w-4 text-primary focus:ring-primary/50 border-white/20 rounded"
                                >
                                <label for="selectAllCodes" class="text-sm text-neutral-light cursor-pointer">全选</label>
                                <button id="deleteSelectedCodes" class="text-sm text-red-400 hover:text-red-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                    <i class="fa fa-trash mr-1"></i>删除所选
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-white/5">
                            <thead>
                                <tr>
                                    <th class="px-4 py-3 bg-white/5 text-left text-xs font-medium text-neutral-light uppercase tracking-wider w-10">
                                        <input 
                                            type="checkbox" 
                                            id="selectAllHeader" 
                                            class="h-4 w-4 text-primary focus:ring-primary/50 border-white/20 rounded"
                                        >
                                    </th>
                                    <th class="px-4 py-3 bg-white/5 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">兑换码</th>
                                    <th class="px-4 py-3 bg-white/5 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">状态</th>
                                    <th class="px-4 py-3 bg-white/5 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">使用者</th>
                                    
                                    <th class="px-4 py-3 bg-white/5 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">奖品</th>
                                    <th class="px-4 py-3 bg-white/5 text-left text-xs font-medium text-neutral-light uppercase tracking-wider">兑换时间</th>
                                    <th class="px-4 py-3 bg-white/5 text-left text-xs font-medium text-neutral-light uppercase tracking-wider rounded-tr-lg">操作</th>
                                </tr>
                            </thead>
                            <tbody id="codesTableBody" class="divide-y divide-white/5">
                                <!-- 兑换码数据将动态生成 -->
                                <tr>
                                    <td colspan="7" class="px-4 py-8 text-center text-neutral-light">
                                        <i class="fa fa-inbox mb-2 block text-2xl"></i>
                                        暂无兑换码数据
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-5 flex flex-wrap justify-between items-center">
                        <div class="text-sm text-neutral-light mb-3 sm:mb-0">
                            显示 <span id="showingRange">0-0</span> 条，共 <span id="totalCodesText">0</span> 条
                        </div>
                        <div class="flex space-x-2">
                            <button id="prevPage" class="px-3 py-1.5 bg-white/5 border border-white/10 rounded text-sm hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" disabled>
                                <i class="fa fa-chevron-left text-xs"></i> 上一页
                            </button>
                            <span id="pageInfo" class="px-3 py-1.5 text-sm">第 1 页</span>
                            <button id="nextPage" class="px-3 py-1.5 bg-white/5 border border-white/10 rounded text-sm hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" disabled>
                                下一页 <i class="fa fa-chevron-right text-xs"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 未登录提示 -->
        <div id="notLoggedIn" class="card-luxury rounded-xl p-8 shadow-elegant text-center">
            <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-6">
                <i class="fa fa-user-circle text-primary text-2xl"></i>
            </div>
            <h2 class="text-xl font-display font-semibold mb-3">请先登录账号</h2>
            <p class="text-neutral-light mb-6 max-w-md mx-auto">登录后即可使用盲盒兑换功能，开启您的惊喜之旅</p>
            <div class="flex flex-col sm:flex-row justify-center space-y-3 sm:space-y-0 sm:space-x-3">
                <button id="loginPromptBtn" class="bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-white font-medium py-3 px-6 rounded-lg transition-all">
                    立即登录
                </button>
                <button id="registerPromptBtn" class="bg-white/5 hover:bg-white/10 text-white font-medium py-3 px-6 rounded-lg transition-all border border-white/10">
                    注册账号
                </button>
            </div>
        </div>
        
        <!-- 用户区域 -->
        <div id="userArea" class="hidden">
            <!-- 会员每日次数提示 -->
            <div class="card-luxury rounded-xl p-4 shadow-elegant mb-6 flex justify-between items-center">
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center mr-3">
                        <i class="fa fa-ticket text-primary"></i>
                    </div>
                    <div>
                        <p class="text-sm text-neutral-light">今日剩余开盒次数</p>
                        <p class="font-medium" id="dailyRemaining">3/3 次</p>
                    </div>
                </div>
                <button id="checkMemberBtn" class="text-sm text-primary hover:text-primary/80 transition-colors flex items-center">
                    <span>查看会员特权</span>
                    <i class="fa fa-angle-right ml-1"></i>
                </button>
            </div>
            
            <!-- 盲盒展示区 -->
            <div class="card-luxury rounded-xl p-6 shadow-elegant mb-8 relative overflow-hidden">
                <!-- 装饰元素 -->
                <div class="absolute top-0 right-0 w-40 h-40 bg-primary/5 rounded-full -mr-20 -mt-20"></div>
                <div class="absolute bottom-0 left-0 w-32 h-32 bg-secondary/5 rounded-full -ml-16 -mb-16"></div>
                
                <div class="text-center mb-8 relative z-10">
                    <h2 class="text-xl font-display font-semibold mb-2">盲盒兑换</h2>
                    <p class="text-neutral-light text-sm">输入您的兑换码，开启神秘盲盒</p>
                </div>
                
                <!-- 盲盒图片 -->
                <div class="flex justify-center mb-8 relative z-10">
                    <div id="blindboxImage" class="w-48 h-48 sm:w-64 sm:h-64 bg-gradient-to-br from-primary/10 to-secondary/10 rounded-xl flex items-center justify-center overflow-hidden border border-white/10">
                        <img src="https://picsum.photos/seed/box1/240/240" alt="高端盲盒图片" class="w-40 h-40 object-contain">
                    </div>
                </div>
                
                <!-- 兑换码输入 -->
                <form id="redeemForm" class="space-y-5 relative z-10">
                    <div>
                        <label for="userCode" class="block text-sm font-medium text-neutral-light mb-2">请输入兑换码</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa fa-key text-neutral-light"></i>
                            </div>
                            <input 
                                type="text" 
                                id="userCode" 
                                class="w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                                placeholder="输入兑换码（区分大小写）"
                                required
                            >
                        </div>
                        <p class="text-xs text-neutral-light/70 mt-1">提示：兑换码由字母和数字组成，区分大小写</p>
                    </div>
                    
                    <button 
                        type="submit" 
                        id="openBoxBtn"
                        class="w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all flex items-center justify-center group"
                    >
                        <span>开启盲盒</span>
                        <i class="fa fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </form>
            </div>
            
            <!-- 盲盒结果区域 -->
            <div id="resultArea" class="hidden">
                <!-- 成功结果 -->
                <div id="successResult" class="hidden card-luxury rounded-xl p-6 shadow-elegant border-l-4 border-accent">
                    <div class="flex flex-col sm:flex-row">
                        <div class="flex-shrink-0 mb-6 sm:mb-0">
                            <div class="bg-accent/10 p-5 rounded-full w-20 h-20 flex items-center justify-center mx-auto sm:mx-0 border border-accent/20 shadow-gold">
                                <i class="fa fa-trophy text-accent text-3xl"></i>
                            </div>
                        </div>
                        <div class="sm:ml-8">
                            <h3 class="text-xl font-display font-semibold text-white mb-4">恭喜您获得！</h3>
                            
                            <!-- 会员积分提示 -->
                            <div class="bg-white/5 rounded-lg p-3 mb-5 flex items-center">
                                <i class="fa fa-star text-accent mr-2"></i>
                                <p class="text-sm">获得 <span class="font-medium text-accent">10 积分</span>，距离升级更近一步！</p>
                            </div>
                            
                            <div class="bg-white/5 p-5 rounded-lg border border-white/5">
                                <div class="mb-5 pb-5 border-b border-white/5">
                                    <h4 class="text-sm font-medium text-neutral-light mb-2">奖品名称</h4>
                                    <p id="prizeName" class="text-xl text-white font-medium"></p>
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-neutral-light mb-2">兑换码</h4>
                                    <div class="flex">
                                        <p id="prizeCode" class="text-white font-mono bg-white/5 p-2 rounded flex-1 overflow-x-auto"></p>
                                        <button id="copyPrizeCode" class="text-primary hover:text-primary/80 text-sm ml-3 tooltip" data-tooltip="复制兑换码">
                                            <i class="fa fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-center">
                        <button id="redeemAnotherBtn" class="text-primary hover:text-primary/80 font-medium transition-colors flex items-center">
                            <i class="fa fa-refresh mr-2"></i> 兑换另一个盲盒
                        </button>
                    </div>
                </div>
                
                <!-- 错误结果 -->
                <div id="errorResult" class="hidden card-luxury rounded-xl p-6 shadow-elegant border-l-4 border-red-500">
                    <div class="flex flex-col sm:flex-row">
                        <div class="flex-shrink-0 mb-6 sm:mb-0">
                            <div class="bg-red-500/10 p-5 rounded-full w-20 h-20 flex items-center justify-center mx-auto sm:mx-0 border border-red-500/20">
                                <i class="fa fa-times-circle text-red-400 text-3xl"></i>
                            </div>
                        </div>
                        <div class="sm:ml-8">
                            <h3 class="text-xl font-display font-semibold text-white mb-3">操作失败</h3>
                            <p id="errorMsg" class="text-neutral-light">您输入的兑换码无效或已被使用，请检查后重试。</p>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-center">
                        <button id="tryAgainBtn" class="text-primary hover:text-primary/80 font-medium transition-colors flex items-center">
                            <i class="fa fa-reply mr-2"></i> 重新输入
                        </button>
                    </div>
                </div>
                
                <!-- 次数用完提示 -->
                <div id="limitReachedResult" class="hidden card-luxury rounded-xl p-6 shadow-elegant border-l-4 border-silver">
                    <div class="flex flex-col sm:flex-row">
                        <div class="flex-shrink-0 mb-6 sm:mb-0">
                            <div class="bg-silver/10 p-5 rounded-full w-20 h-20 flex items-center justify-center mx-auto sm:mx-0 border border-silver/20 shadow-silver">
                                <i class="fa fa-clock-o text-silver text-3xl"></i>
                            </div>
                        </div>
                        <div class="sm:ml-8">
                            <h3 class="text-xl font-display font-semibold text-white mb-3">今日开盒次数已用完</h3>
                            <p class="text-neutral-light mb-4">您今天的盲盒开启次数已达上限。</p>
                            <div class="bg-white/5 p-4 rounded-lg">
                                <p class="text-sm text-neutral-light mb-3">升级会员可获得更多开盒次数：</p>
                                <ul class="list-disc pl-5 space-y-1 text-sm text-neutral-light">
                                    <li>白银会员：每日可开盒5次</li>
                                    <li>黄金会员：每日可开盒10次</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-center">
                        <button id="toMemberCenterBtn" class="bg-gradient-to-r from-silver to-neutral-dark hover:opacity-90 text-white font-medium py-2 px-5 rounded-lg transition-all flex items-center">
                            <i class="fa fa-user-circle mr-2"></i> 查看会员权益
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 奖品展示区 -->
            <div class="mt-12">
                <h3 class="text-center text-lg font-display font-semibold mb-8 relative inline-block mx-auto">
                    可能获得的奖品
                    <div class="absolute -bottom-2 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"></div>
                </h3>
                <div id="prizesShowcase" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-5">
                    <!-- 奖品展示将动态生成 -->
                </div>
            </div>
        </div>
    </main>

    <!-- 通知提示 -->
    <div id="notification" class="fixed bottom-6 right-6 bg-dark border border-white/10 px-5 py-3 rounded-lg shadow-elegant transform translate-y-20 opacity-0 transition-all duration-300 z-50 flex items-center max-w-xs">
        <i id="notificationIcon" class="fa fa-check-circle mr-3 text-green-400"></i>
        <p id="notificationText">操作成功</p>
    </div>

    <!-- 确认对话框 -->
    <div id="confirmModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-md w-full shadow-elegant">
            <div class="text-center mb-6">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-500/10 mb-4">
                    <i class="fa fa-exclamation-triangle text-red-400 text-2xl"></i>
                </div>
                <h3 class="text-xl font-display font-semibold" id="confirmTitle">确认操作</h3>
                <p class="text-neutral-light mt-2" id="confirmMessage">您确定要执行此操作吗？</p>
            </div>
            <div class="flex space-x-3">
                <button id="cancelAction" class="flex-1 bg-white/5 hover:bg-white/10 text-white font-medium py-3 px-4 rounded-lg transition-colors">
                    取消
                </button>
                <button id="confirmAction" class="flex-1 bg-red-500/20 hover:bg-red-500/30 text-red-400 font-medium py-3 px-4 rounded-lg transition-colors">
                    确认
                </button>
            </div>
        </div>
    </div>

    <!-- 管理员密码修改对话框 -->
    <div id="changePasswordModal" class="fixed inset-0 bg-black/70 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-dark border border-white/10 rounded-xl p-6 max-w-md w-full shadow-elegant">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-display font-semibold">修改管理员密码</h3>
                <button class="close-modal text-neutral-light hover:text-white transition-colors">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <form id="changePasswordForm" class="space-y-5">
                <div>
                    <label for="currentPass" class="block text-sm font-medium text-neutral-light mb-2">当前密码</label>
                    <input 
                        type="password" 
                        id="currentPass" 
                        class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                        placeholder="请输入当前密码"
                        required
                    >
                </div>
                
                <div>
                    <label for="newPass" class="block text-sm font-medium text-neutral-light mb-2">新密码</label>
                    <input 
                        type="password" 
                        id="newPass" 
                        class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                        placeholder="请设置新密码（至少8个字符）"
                        required
                        minlength="8"
                    >
                </div>
                
                <div>
                    <label for="confirmPass" class="block text-sm font-medium text-neutral-light mb-2">确认新密码</label>
                    <input 
                        type="password" 
                        id="confirmPass" 
                        class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors text-white"
                        placeholder="请再次输入新密码"
                        required
                    >
                </div>
                
                <button 
                    type="submit" 
                    class="w-full bg-gradient-to-r from-primary to-secondary hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all"
                >
                    确认修改
                </button>
            </form>
            
            <p id="passError" class="mt-4 text-sm text-red-400 hidden text-center"></p>
        </div>
    </div>

    <footer class="bg-dark/80 backdrop-blur-md mt-20 py-8 border-t border-white/10">
        <div class="container mx-auto px-4 max-w-5xl text-center text-neutral-light text-sm">
            <p>远光84民间论坛盲盒开奖 &copy; <span id="currentYear"></span></p>
            <p class="mt-2">本网站仅用于论坛内部活动，非官方平台</p>
        </div>
    </footer>

    <script>
        // 初始化数据
        function initData() {
            // 初始化管理员密钥和管理员账户
            if (!localStorage.getItem('adminKey')) {
                // 默认管理员密钥，实际应用中应更复杂且通过安全方式设置
                localStorage.setItem('adminKey', 'admin_secret_key');
            }
            
            // 初始化管理员账户
            if (!localStorage.getItem('adminAccounts')) {
                localStorage.setItem('adminAccounts', JSON.stringify([]));
            }
            
            // 初始化用户账户
            if (!localStorage.getItem('userAccounts')) {
                localStorage.setItem('userAccounts', JSON.stringify([]));
            }
            
            // 初始化会员设置
            if (!localStorage.getItem('memberSettings')) {
                const defaultMemberSettings = {
                    silver: {
                        points: 100,
                        probabilityBonus: 10,
                        dailyLimit: 5
                    },
                    gold: {
                        points: 500,
                        probabilityBonus: 30,
                        dailyLimit: 10,
                        monthlyCodes: 2
                    }
                };
                localStorage.setItem('memberSettings', JSON.stringify(defaultMemberSettings));
            }
            
            // 初始化奖品概率数据 - 包含会员专属奖品
            if (!localStorage.getItem('prizes')) {
                const defaultPrizes = [
                    { id: 1, name: "论坛金币 x100", probability: 40, color: "#165DFF", exclusive: null },
                    { id: 2, name: "会员体验卡 7天", probability: 30, color: "#722ED1", exclusive: null },
                    { id: 3, name: "专属头像框", probability: 20, color: "#C0C0C0", exclusive: "silver" },
                    { id: 4, name: "神秘大礼包", probability: 8, color: "#FFC200", exclusive: "gold" },
                    { id: 5, name: "黄金会员专属勋章", probability: 2, color: "#D4AF37", exclusive: "gold" }
                ];
                localStorage.setItem('prizes', JSON.stringify(defaultPrizes));
            }
            
            // 初始化兑换码数据
            if (!localStorage.getItem('redeemCodes')) {
                localStorage.setItem('redeemCodes', JSON.stringify([]));
            }
            
            // 初始化当前年份
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // 初始化分享链接
            document.getElementById('shareLink').value = window.location.href;
        }
        
        // 用户认证相关函数
        function getUserAccounts() {
            return JSON.parse(localStorage.getItem('userAccounts') || '[]');
        }
        
        function saveUserAccounts(users) {
            localStorage.setItem('userAccounts', JSON.stringify(users));
        }
        
        function getCurrentUser() {
            const userId = localStorage.getItem('currentUserId');
            if (!userId) return null;
            
            const users = getUserAccounts();
            return users.find(u => u.id === userId) || null;
        }
        
        function isUserLoggedIn() {
            return !!getCurrentUser();
        }
        
        function loginUser(username, password) {
            const users = getUserAccounts();
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                localStorage.setItem('currentUserId', user.id);
                return user;
            }
            return null;
        }
        
        function logoutUser() {
            localStorage.removeItem('currentUserId');
            updateAuthUI();
        }
        
        function registerUser(username, email, password) {
            const users = getUserAccounts();
            
            // 检查用户名是否已存在
            if (users.some(u => u.username === username)) {
                return { success: false, message: '用户名已被占用' };
            }
            
            // 检查邮箱是否已存在
            if (users.some(u => u.email === email)) {
                return { success: false, message: '邮箱已被注册' };
            }
            
            // 创建新用户
            const newUser = {
                id: 'user_' + Date.now(),
                username,
                email,
                password,
                avatar: `https://picsum.photos/seed/${username}/100/100`,
                memberLevel: 'normal', // normal, silver, gold
                points: 0,
                openCount: 0,
                lastOpenDate: null,
                dailyOpenCount: 0,
                createdAt: new Date().toISOString()
            };
            
            users.push(newUser);
            saveUserAccounts(users);
            
            return { success: true, user: newUser };
        }
        
        function updateUser(userData) {
            const users = getUserAccounts();
            const index = users.findIndex(u => u.id === userData.id);
            
            if (index !== -1) {
                users[index] = { ...users[index], ...userData };
                saveUserAccounts(users);
                return users[index];
            }
            return null;
        }
        
        // 管理员相关函数
        function getAdminAccounts() {
            return JSON.parse(localStorage.getItem('adminAccounts') || '[]');
        }
        
        function saveAdminAccounts(admins) {
            localStorage.setItem('adminAccounts', JSON.stringify(admins));
        }
        
        function getCurrentAdmin() {
            const adminId = localStorage.getItem('currentAdminId');
            if (!adminId) return null;
            
            const admins = getAdminAccounts();
            return admins.find(a => a.id === adminId) || null;
        }
        
        function isAdminLoggedIn() {
            return !!getCurrentAdmin();
        }
        
        function loginAdmin(username, password) {
            const admins = getAdminAccounts();
            const admin = admins.find(a => a.username === username && a.password === password);
            
            if (admin) {
                localStorage.setItem('currentAdminId', admin.id);
                return admin;
            }
            return null;
        }
        
        function logoutAdmin() {
            localStorage.removeItem('currentAdminId');
            updateAuthUI();
        }
        
        function registerAdmin(key, username, password) {
            // 验证管理员密钥
            const adminKey = localStorage.getItem('adminKey');
            if (key !== adminKey) {
                return { success: false, message: '管理员密钥不正确' };
            }
            
            const admins = getAdminAccounts();
            
            // 检查用户名是否已存在
            if (admins.some(a => a.username === username)) {
                return { success: false, message: '管理员用户名已被占用' };
            }
            
            // 创建新管理员
            const newAdmin = {
                id: 'admin_' + Date.now(),
                username,
                password,
                createdAt: new Date().toISOString()
            };
            
            admins.push(newAdmin);
            saveAdminAccounts(admins);
            
            return { success: true, admin: newAdmin };
        }
        
        function changeAdminPassword(currentPass, newPass) {
            const admin = getCurrentAdmin();
            if (!admin) {
                return { success: false, message: '请先登录管理员账号' };
            }
            
            if (admin.password !== currentPass) {
                return { success: false, message: '当前密码不正确' };
            }
            
            const admins = getAdminAccounts();
            const index = admins.findIndex(a => a.id === admin.id);
            
            if (index !== -1) {
                admins[index].password = newPass;
                saveAdminAccounts(admins);
                return { success: true };
            }
            
            return { success: false, message: '修改密码失败' };
        }
        
        // 会员相关函数
        function getMemberLevelName(level) {
            switch(level) {
                case 'silver': return '白银会员';
                case 'gold': return '黄金会员';
                default: return '普通会员';
            }
        }
        
        function getMemberLevelIcon(level) {
            switch(level) {
                case 'silver': return '<i class="fa fa-user-plus silver-gradient"></i>';
                case 'gold': return '<i class="fa fa-user-plus gold-gradient"></i>';
                default: return '<i class="fa fa-user text-neutral-light"></i>';
            }
        }
        
        function getMemberBadgeStyle(level) {
            const badge = document.getElementById('memberBadge');
            const icon = document.getElementById('memberBadgeIcon');
            
            // 重置样式
            badge.className = 'member-badge w-24 h-24 rounded-full flex items-center justify-center mb-4 sm:mb-0 sm:mr-6';
            icon.className = 'fa fa-user text-4xl';
            
            switch(level) {
                case 'silver':
                    badge.className += ' bg-gradient-to-br from-neutral-dark to-silver/20 border-2 border-silver/30 shadow-silver';
                    icon.className += ' silver-gradient';
                    break;
                case 'gold':
                    badge.className += ' bg-gradient-to-br from-neutral-dark to-accent/20 border-2 border-accent/30 shadow-gold';
                    icon.className += ' gold-gradient';
                    break;
                default:
                    badge.className += ' bg-gradient-to-br from-neutral-dark to-dark border-2 border-white/10';
                    icon.className += ' text-neutral-light';
            }
        }
        
        // 检查并更新会员等级
        function checkMemberLevelUp(user) {
            const settings = JSON.parse(localStorage.getItem('memberSettings'));
            let newLevel = user.memberLevel;
            
            if (user.points >= settings.gold.points) {
                newLevel = 'gold';
            } else if (user.points >= settings.silver.points) {
                newLevel = 'silver';
            } else {
                newLevel = 'normal';
            }
            
            if (newLevel !== user.memberLevel) {
                const updated = updateUser({ ...user, memberLevel: newLevel });
                showNotification('恭喜', `您已升级为${getMemberLevelName(newLevel)}！`, 'success');
                return updated;
            }
            return user;
        }
        
        // 管理员手动升级会员
        function upgradeMember(memberId, targetLevel, points) {
            const users = getUserAccounts();
            const index = users.findIndex(u => u.id === memberId);
            
            if (index !== -1) {
                const updates = { memberLevel: targetLevel };
                if (points !== null && points !== undefined) {
                    updates.points = points;
                }
                
                users[index] = { ...users[index], ...updates };
                saveUserAccounts(users);
                return users[index];
            }
            return null;
        }
        
        // 获取会员每日开盒限制
        function getMemberDailyLimit(user) {
            const settings = JSON.parse(localStorage.getItem('memberSettings'));
            
            switch(user.memberLevel) {
                case 'gold':
                    return settings.gold.dailyLimit;
                case 'silver':
                    return settings.silver.dailyLimit;
                default:
                    return 3; // 普通会员默认3次
            }
        }
        
        // 检查今日开盒次数是否已用完
        function checkDailyLimit() {
            const user = getCurrentUser();
            if (!user) return true;
            
            const today = new Date().toDateString();
            
            // 如果是新的一天，重置计数
            if (!user.lastOpenDate || user.lastOpenDate !== today) {
                updateUser({ 
                    ...user,
                    dailyOpenCount: 1,
                    lastOpenDate: today
                });
                return false;
            }
            
            // 检查是否超过限制
            const dailyLimit = getMemberDailyLimit(user);
            const currentCount = user.dailyOpenCount || 0;
            
            if (currentCount >= dailyLimit) {
                return true; // 已达上限
            }
            
            // 更新计数
            updateUser({ 
                ...user,
                dailyOpenCount: currentCount + 1,
                openCount: (user.openCount || 0) + 1
            });
            return false;
        }
        
        // 更新会员中心显示
        function updateMemberCenter() {
            const user = getCurrentUser();
            if (!user) return;
            
            const settings = JSON.parse(localStorage.getItem('memberSettings'));
            
            // 更新会员等级文本
            document.getElementById('memberLevelName').textContent = getMemberLevelName(user.memberLevel);
            
            // 更新会员信息
            document.getElementById('memberPoints').textContent = user.points || 0;
            getMemberBadgeStyle(user.memberLevel);
            
            // 计算升级进度
            let nextLevelPoints, currentLevelPoints;
            
            if (user.memberLevel === 'gold') {
                document.getElementById('memberProgress').style.width = '100%';
                document.getElementById('pointsToNextLevel').textContent = '已达最高等级';
            } else if (user.memberLevel === 'silver') {
                currentLevelPoints = settings.silver.points;
                nextLevelPoints = settings.gold.points;
                const progress = Math.min(100, ((user.points - currentLevelPoints) / (nextLevelPoints - currentLevelPoints)) * 100);
                document.getElementById('memberProgress').style.width = `${progress}%`;
                document.getElementById('pointsToNextLevel').textContent = Math.max(0, nextLevelPoints - user.points) + ' 积分';
            } else {
                currentLevelPoints = 0;
                nextLevelPoints = settings.silver.points;
                const progress = Math.min(100, (user.points / nextLevelPoints) * 100);
                document.getElementById('memberProgress').style.width = `${progress}%`;
                document.getElementById('pointsToNextLevel').textContent = Math.max(0, nextLevelPoints - user.points) + ' 积分';
            }
            
            // 更新会员特权显示
            let probBonus = '基础概率';
            let exclusivePrizes = '无专属奖品';
            let dailyLimit = '3次';
            
            if (user.memberLevel === 'gold') {
                probBonus = `+${settings.gold.probabilityBonus}%`;
                exclusivePrizes = '黄金专属奖品';
                dailyLimit = `${settings.gold.dailyLimit}次`;
            } else if (user.memberLevel === 'silver') {
                probBonus = `+${settings.silver.probabilityBonus}%`;
                exclusivePrizes = '白银专属奖品';
                dailyLimit = `${settings.silver.dailyLimit}次`;
            }
            
            document.getElementById('memberProbabilityBonus').textContent = `${getMemberLevelName(user.memberLevel)}: ${probBonus}`;
            document.getElementById('memberExclusivePrizes').textContent = `${getMemberLevelName(user.memberLevel)}: ${exclusivePrizes}`;
            document.getElementById('memberDailyLimit').textContent = `${getMemberLevelName(user.memberLevel)}: 每日${dailyLimit}`;
            
            // 更新每日剩余次数显示
            const today = new Date().toDateString();
            const dailyOpenCount = user.lastOpenDate === today ? (user.dailyOpenCount || 0) : 0;
            const limit = getMemberDailyLimit(user);
            document.getElementById('dailyRemaining').textContent = `${limit - dailyOpenCount}/${limit} 次`;
        }
        
        // 更新会员管理界面
        function updateMemberManagement() {